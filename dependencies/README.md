# Извлекаем пользу из сторонних зависимостей

# Пример 1. Драйверы Mongo

На текущей работе идет переход с легаси монго драйвера globalsign на официальный mongo-driver. При исполнения запроса, что методы Find в пакете globalsign, что метод Find в пакете mongo-driver
в качестве запроса принимает тип данных interface{}. Меня сразу смутило отсутствие типизации и насколько переход на новый драйвер не сломает систему.

Разбирался в тот момент я долго, но для краткости стоит понимать, что запросы чтения в монге это по сути json с фильтром и json с проекцией. В фильтре можно устанавливать в качестве искомых значений 
конкретный тип данных: целочисленные, строки, дата и т.п. Но есть и комплексные типы данных, такие как регулярные выражения. Вообще, регулярки в монге можно задавать в сыром виде, то есть в виде строки с
конкретным синтаксисом или в виде объекта RegExp. 
Представление подобных комплексных объектов среди различных драйверов требует особого внимания. Например, как представляется RegExp в globalsign:

```go
ElementRegEx                  byte = 0x0B
```

а как в mongo-driver

```go
Regex            Type = 0x0B  // отдельный тип данных Type
```

Естественно, если мы строим запросы на основе регулярок, то регулярки из globalsign не будут работать в запросе Find из mongo-driver. (но что забавно, обратное неверно, globalsign понимает регулярки из mongo-driver).
Таким образом, однажды часть запросов на чтения на стейдже у нас просто перестала работать, когда перевели метод на новый драйвер)

# Пример 2. Posgres driver

Касательно драйвера постгреса буду немногословен. 
