# Избавляемся от зависимоти зависимосте. Решение проблем.

## Зависимость фреймворка

Проект по созданию графического десктоп приложения, зависимость от выбора библиотеки/фреймворка для создания десктопа.
Тут можно брать следующие свойства, чтобы определить зависимость (степень зависимости): поддержка, кросс-платформенность, легкость приложения, а также, как отражать существующие данные в десктопе.
Был выбран wxWidgets, из-за чего приходилось писать собственные классы для отражения данных, что в свою очередь привело к запутыванию проекта и приложения тяжело было поддерживать.
Если бы был выбран QT, то проект поддерживать было намного проще.

Во избежании подобного, стоит выявлять основные критерии работы проекта и спецификации.

## Зависимость расшаренного формата

Дипломный проект. Хранение настроек проекта. Настройки содержали в себе font, font-size и прочие декоративные дополнения проекта, которые пользователь мог настроить под себя. 
Сериализация и десериализация проходила следующим образом: чтобы не использовать boost и не включать данную зависимость в проект (вопрос выбора стандарта, компилятора и т.д.) был создан свой "формат" для сериализации, подобие XML-документа.

То есть настройки сериализовались в подобный XML-документ и десериализовались из него. Получилось, что сериализатор и десериализатор зависили только от формата данных.


## Зависимость от зависимости

Рабочий проект. Партнер присылал файл, который нужно было распарсить. Для парсинга использовался конфиг, который изменялся по ходу работы программы (в зависимости от файла).
То есть, приходил файл, создавался парсер, парсер менял конфиг под задачу и парсил файл с нужным конфигом. 

Тут может быть такая ситуация, что конфиг не верно настроен (результат парсера зависит от свойства установленных настроек конфига). 
В данном случае, можно:
1. Создать Типы данных Файл, для каждого типа. Если для конкретного типа Файла создан неверный конфиг, выбрасывать исключение на этапе компиляции.
2. Если язык динамический, то также создаем типы данных Файл и для каждого типа файла создаем конфиг статический, но так у нас будет зависимость от конфига, но мы можем проверять корректность конфига.
3. Написать документацию, комментарии, всячески даем понять, что изменения свойства приведет к изменению поведения программы.


## Зависимость от краша

Рабочий проект. Использовалась библиотке для работы с интервалами дат PostgreSQL, и бывали ситуации, когда работа библиотеки приводила к выбросу исключения.

Тут скорее, можно создать обертку для класса работы с интервалами дат, и прописать предусловия или использовать иную библиотеку, если не удается поймать исключительную ситуацию (например, слишком долго работает библиотека). 
Если же другую библиотеку не получится выбрать, то стоит добавить документацию, прописать комментарии, т.е. уменьшить вероятность допущение подобных ситуаций, создать 
суперспефицикацию.



## Зависимость от перебрасывания 

Зависимость от серверов. Если имеются реплики MongoDB, и сервера расположены в разных регионах, то, в случае если нода упадет и переключиться на другую ноду, это может
повлиять на скорость работы системы. В данном случае, можно использовать виртуалки. Но если, упадет сервер целиком, то возможно нужно ставить ЦОДы, но тут уже зависимость от бюджета.


## Зависимость инверсии

Речь о динамически типизированных языках. Если А использует Б, а Б ошибочна, то надо устранить ошибки в Б. Возможно, тут можно написать хорошие тесты, и добавить ассерты, что в случае, если Б -- ошибочна, то в целом приостанавливаем работу программы.
Тут выход таков, что писать компоненты безошибочно, или, если присутствует ошибка, приостанавливать работу программы.

## Зависимость зацикливания

Если брать уровень кода, то это можно выразить, как продолжение "Зависимости инверсии" или как "Зависимость от композиции". Если А использует Б, а Б использует С, то ошибка работы С не всегда может
приводить к ошибке работы А -- Б может обработать ошибочно состояние.

Для решения проблемы, так же бы предложил вводить пред-условия, ассерты и тесты -- если мы устраним множество возможных неверных состояний, то зависимость А от Б, а Б от С будет минимальной.

Можно брать сборку проекта на PHP через composer -- Пакет А основан на пакете Б, пакет Б зависит от версии PHP. Но это не значит, что А зависит от версии PHP. В таком
случае я бы, возможно, создал ветку от библиотеки и переписал моменты, связанные с чувствительностью версии PHP. Ну или изменил выбор в сторону "менее чувсвтительных" библиотек.



## Зависимость высшего порядка

Проект "Автопарк". Использование библиотеки MongoDB для Laravel, которая изменяла модель поведения моделей. 
Работы с датами в модели изменялась, если была подключена библиотека Mongo, что в свою очередь выдавал неочевидные результаты.

Для решения проблемы, можно использовать мутаторы Laravel'a, но из-за этого работа модели может сбивать с толку.
А в целом, наследоваться от базовой модели, скажем MongoModel, и, поскольку это будет отдельный тип, то работать с ним будем независимо, тогда никаких проблем не будет.



## Зависимость большинства

 Не встречался с подобным на практике.
