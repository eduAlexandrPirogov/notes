# Формализуем понятие надёжности системы

Все ниже приведенные метрики взяты на основе локальных тестов и наблюдений и очень субъективны. Поскольку проект уже существует,
а требований по надежности, кроме как "должна работать быстро и надежно 99% времени" не было, то сам попытался прикинуть соответствующие значения.
Хотя все подобные инварианты должны, как мне кажется, строиться на основе конкретных измерений (например на staging'е, или на прототипе).

Система отправки целевых сообщений пользователям. Разработана на Erlang.
Основный свойства системы:
1) количество одновременно работающих нод
2) количество одновременно работающих воркеров на ноде, занимающиеся пересылкой (достать сообщениЕ, сформировать, фильтровать, отправить)
3) время обработки целевой отправки сообщений 
4) пропускная способность (сколько сообщений могут быть отправлены за час)
5) время работы системы

1 Свойство: количество одновременно работающих нод
а) Широкий диапазон: от 1 работающих нод
б) Узкий диапазон: от 3 работающих нод
Инвариант: WEAK, т.к. работа началась с двух работающих нод. Как только поставили 3 сервера, уходить с этого требования не собираемся.
Диапазон инварианта: от 3 работающих нод.


2 Свойство: количество одновременно работающих воркеров на ноде, занимающиеся пересылкой (достать сообщениЕ, сформировать, фильтровать, отправить)
а) Широкий диапазон: до 5тыс процессов.
б) Узкий диапазон: до 10тыс процессов.
Инвариант: STABLE, т.к. возможны отлконения на несколько процентов (например, в праздники могут на 10% больше потребоваться процессов для 
обработки сообщений, но это не частое явление).
Диапазон инварианта: до 10 тыс процессов. Это взято с учетом, сколько требуется в среднем в минуту на отправку сообщений + 
максимальное возможное число созданных процессов на ноде. 

3 Свойство: время обработки целевой отправки сообщений 
а) Широкий диапазон: до 2 мс.
б) Узкий диапазон: до 1 мс.
Инвариант: STRONG, т.к. это целиком и полностью завязано на работе внутренней системе, ну и по договору должны сообщений обрабатываться быстро.
Диапазон инварианта: до 2мс.  

4 Свойство: пропускная способность (сколько сообщений могут быть отправлены за час)
а) Широкий диапазон: от 100тыс
б) Узкий диапазон: от 500тыс
Инвариант: RESILENT, т.к. возможны чрезмерные нагрузки в праздники, из-за чего пропускная способность может падать, но благодаря Erlang'у
распределять нагрузку, восстанавливать ноды довольно легко. Возмоно, поскольку используется Erlang, это будет скорее STABLE, но вот отлконения
в момент времени могут быть серьезными, пока не восстановится нода.
Диапазон инварианта: от 100 тыс.

5 Свойство: время работы системы
а) Широкий диапазон: 100%
б) Узкий диапазон: 100%
Инвариант: STRONG, ну тут просто потому что Erlang, сказать и нечего :)
Диапазон инварианта: 100%

